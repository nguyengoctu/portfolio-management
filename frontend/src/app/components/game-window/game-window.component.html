<div *ngIf="currentGame" class="game-window-overlay">
  <div class="game-window">
    <!-- Game Header -->
    <div class="game-header">
      <div class="game-title">
        <h3>🎯 Caro Game</h3>
        <button (click)="closeGame()" class="close-btn">×</button>
      </div>
      
      <!-- Players Info -->
      <div class="players-info">
        <div class="player" [class.active]="currentGame.currentPlayer === 'X'">
          <div class="player-symbol symbol-x">×</div>
          <div class="player-details">
            <div class="player-name">{{ currentGame.players.player1.name }}</div>
            <div class="player-label">Player 1</div>
          </div>
        </div>
        
        <div class="vs-section">
          <div class="scoreboard-inline">
            <span class="score">{{ currentGame.scoreboard.player1Wins }}</span>
            <span class="score-separator">-</span>
            <span class="score">{{ currentGame.scoreboard.player2Wins }}</span>
          </div>
          <div class="vs">VS</div>
          <div class="draws-info" *ngIf="currentGame.scoreboard.draws > 0">
            Draws: {{ currentGame.scoreboard.draws }}
          </div>
        </div>
        
        <div class="player" [class.active]="currentGame.currentPlayer === 'O'">
          <div class="player-symbol symbol-o">○</div>
          <div class="player-details">
            <div class="player-name">{{ currentGame.players.player2.name }}</div>
            <div class="player-label">Player 2</div>
          </div>
        </div>
      </div>

      <!-- Game Status -->
      <div class="game-status" [class.finished]="isGameFinished()">
        <div class="status-message">{{ getGameStatusMessage() }}</div>
        <div *ngIf="!isGameFinished()" class="turn-indicator">
          <div class="pulse-dot" *ngIf="canMakeMove()"></div>
          <span>{{ canMakeMove() ? 'Your Turn' : 'Opponent\'s Turn' }}</span>
        </div>
      </div>
    </div>

    <!-- Game Board -->
    <div class="game-content">
      <app-game-board
        [board]="currentGame.board"
        [canMakeMove]="canMakeMove() && !isGameFinished()"
        [winningLine]="currentGame.winningLine"
        [lastMove]="currentGame.lastMove"
        (cellClick)="onCellClick($event)"
      ></app-game-board>
    </div>

    <!-- Game Actions -->
    <div class="game-actions">
      <button 
        *ngIf="!isGameFinished()" 
        (click)="quitGame()" 
        class="btn btn-danger"
      >
        🏃‍♂️ Quit Game
      </button>
      
      <div *ngIf="isGameFinished()" class="finished-actions">
        <button 
          (click)="playAgain()" 
          class="btn btn-success"
          [disabled]="playAgainRequested"
        >
          {{ playAgainRequested ? '⏳ Waiting for opponent...' : '🔄 Play Again' }}
        </button>
        
        <button 
          (click)="closeGame()" 
          class="btn btn-secondary"
        >
          ✅ Close Game
        </button>
      </div>
    </div>
  </div>
</div>